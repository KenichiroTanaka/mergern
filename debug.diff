[1;31m*** sample/release-9.1.orid.sgml.auto	2015-07-06 07:46:38.823483562 +0900[0;0m
[1;34m--- sample/release-9.1.sgml.2	2015-07-06 07:38:45.331480962 +0900[0;0m
[1;35m***************[0;0m
[1;35m*** 90,129 ****[0;0m
[1;35m--- 90,142 ----[0;0m
[0;0m   </sect1>[0;0m
[0;0m  [0;0m
[0;0m   <sect1 id="release-9-1-16">[0;0m
[1;34m+ [0;0m
[0;0m    <title>Release 9.1.16</title>[0;0m
[0;0m  [0;0m
[0;0m    <note>[0;0m
[1;34m+ [0;0m
[0;0m    <title>Release Date</title>[0;0m
[1;34m+ [0;0m
[0;0m    <simpara>2015-05-22</simpara>[0;0m
[0;0m    </note>[0;0m
[0;0m  [0;0m
[0;0m    <para>[0;0m
[1;34m+ [0;0m
[0;0m     This release contains a variety of fixes from 9.1.15.[0;0m
[0;0m     For information about new features in the 9.1 major release, see[0;0m
[0;0m     <xref linkend="release-9-1">.[0;0m
[1;34m+ [0;0m
[0;0m    </para>[0;0m
[0;0m  [0;0m
[0;0m    <sect2>[0;0m
[1;34m+ [0;0m
[0;0m     <title>Migration to Version 9.1.16</title>[0;0m
[0;0m  [0;0m
[0;0m     <para>[0;0m
[1;34m+ [0;0m
[0;0m      A dump/restore is not required for those running 9.1.X.[0;0m
[1;34m+ [0;0m
[0;0m     </para>[0;0m
[0;0m  [0;0m
[0;0m     <para>[0;0m
[1;34m+ [0;0m
[0;0m      However, if you use <filename>contrib/citext</>'s[0;0m
[0;0m      <function>regexp_matches()</> functions, see the changelog entry below[0;0m
[0;0m      about that.[0;0m
[1;34m+ [0;0m
[0;0m     </para>[0;0m
[0;0m  [0;0m
[0;0m     <para>[0;0m
[1;34m+ [0;0m
[0;0m      Also, if you are upgrading from a version earlier than 9.1.14,[0;0m
[0;0m      see <xref linkend="release-9-1-14">.[0;0m
[1;34m+ [0;0m
[0;0m     </para>[0;0m
[0;0m  [0;0m
[0;0m    </sect2>[0;0m
[0;0m  [0;0m
[0;0m    <sect2>[0;0m
[1;34m+ [0;0m
[0;0m     <title>Changes</title>[0;0m
[0;0m  [0;0m
[0;0m     <itemizedlist>[0;0m
[1;35m***************[0;0m
[1;35m*** 220,230 ****[0;0m
[1;35m--- 233,248 ----[0;0m
[0;0m  [0;0m
[0;0m      <listitem>[0;0m
[0;0m       <para>[0;0m
[1;34m+ <!--[0;0m
[0;0m        Fix incorrect declaration of <filename>contrib/citext</>'s[0;0m
[0;0m        <function>regexp_matches()</> functions (Tom Lane)[0;0m
[1;34m+ -->[0;0m
[1;34m+ <filename>contrib/citext</>の<function>regexp_matches()</>関数の誤った宣言を修正しました。[0;0m
[1;34m+ (Tom Lane)[0;0m
[0;0m       </para>[0;0m
[0;0m  [0;0m
[0;0m       <para>[0;0m
[1;34m+ <!--[0;0m
[0;0m        These functions should return <type>setof text[]</>, like the core[0;0m
[0;0m        functions they are wrappers for; but they were incorrectly declared as[0;0m
[0;0m        returning just <type>text[]</>.  This mistake had two results: first,[0;0m
[1;35m***************[0;0m
[1;35m*** 232,240 ****[0;0m
[1;35m--- 250,264 ----[0;0m
[0;0m        should get is an empty set (zero rows).  Second, the <literal>g</> flag[0;0m
[0;0m        was effectively ignored, since you would get only one result array even[0;0m
[0;0m        if there were multiple matches.[0;0m
[1;34m+ -->[0;0m
[1;34m+ この関数は本体関数と同様に<type>setof text[]</>を返すべきでしたが、誤って単に<type>text[]</>を返すように宣言されていました。[0;0m
[1;34m+ この誤りは二つの結果をもたらしました。[0;0m
[1;34m+ 第一にマッチするものが無いときに空集合（ゼロ行）を得るべきところ、スカラnullを得ます。[0;0m
[1;34m+ 第二にたとえ複数のマッチがあったとしても一つの結果配列しか得られないことから、<literal>g</>フラグが事実上無視されていました。[0;0m
[0;0m       </para>[0;0m
[0;0m  [0;0m
[0;0m       <para>[0;0m
[1;34m+ <!--[0;0m
[0;0m        While the latter behavior is clearly a bug, there might be applications[0;0m
[0;0m        depending on the former behavior; therefore the function declarations[0;0m
[0;0m        will not be changed by default until <productname>PostgreSQL</> 9.5.[0;0m
[1;35m***************[0;0m
[1;35m*** 247,252 ****[0;0m
[1;35m--- 271,282 ----[0;0m
[0;0m        back to 1.0 if you need to undo that.)  Be aware that either update[0;0m
[0;0m        direction will require dropping and recreating any views or rules that[0;0m
[0;0m        use <filename>citext</>'s <function>regexp_matches()</> functions.[0;0m
[1;34m+ -->[0;0m
[1;34m+ この振る舞いは明らかにバグですが、以前の振る舞いに依存したアプリケーションがありえます。[0;0m
[1;34m+ そのため、<productname>PostgreSQL</> 9.5になるまでは関数宣言はデフォルトでは変更しません。[0;0m
[1;34m+ 9.5より前の系列では、従来の振る舞いが<literal>citext</>拡張モジュールのバージョン1.0として存在し、その一方で私たちは正しい宣言をバージョン1.1として提供します（これはデフォルトではインストール<emphasis>されません</>）。[0;0m
[1;34m+ 9.5より前の系列で修正を適用するには、<literal>citext</>をインストールした各データベースで<literal>ALTER EXTENSION citext UPDATE TO '1.1'</>を実行します（必要に応じて1.0に戻す<quote>UPDATE</>も可能です）。[0;0m
[1;34m+ どちらの方向にバージョン変更する場合でも、<filename>citext</>の<function>regexp_matches()</>関数を使った全てのビューやルールを削除して再作成する必要があることに注意してください。[0;0m
[0;0m       </para>[0;0m
[0;0m      </listitem>[0;0m
[0;0m  [0;0m
[1;35m***************[0;0m
[1;35m*** 489,498 ****[0;0m
[1;35m--- 519,531 ----[0;0m
[0;0m  [0;0m
[0;0m      <listitem>[0;0m
[0;0m       <para>[0;0m
[1;34m+ <!--[0;0m
[0;0m        Ensure <structfield>tableoid</> of a foreign table is reported[0;0m
[0;0m        correctly when a <literal>READ COMMITTED</> recheck occurs after[0;0m
[0;0m        locking rows in <command>SELECT FOR UPDATE</>, <command>UPDATE</>,[0;0m
[0;0m        or <command>DELETE</> (Etsuro Fujita)[0;0m
[1;34m+ -->[0;0m
[1;34m+ <command>SELECT FOR UPDATE</>、<command>UPDATE</>、または、<command>DELETE</>での行ロック後に<literal>READ COMMITTED</>再チェックが生じたときに、外部テーブルの<structfield>tableoid</>が確実に正しく報告されるようにしました。 [0;0m
[0;0m       </para>[0;0m
[0;0m      </listitem>[0;0m
[0;0m  [0;0m
[1;35m***************[0;0m
[1;35m*** 561,573 ****[0;0m
[1;35m--- 594,613 ----[0;0m
[0;0m  [0;0m
[0;0m      <listitem>[0;0m
[0;0m       <para>[0;0m
[1;34m+ <!--[0;0m
[0;0m        Report WAL flush, not insert, position in <literal>IDENTIFY_SYSTEM</>[0;0m
[0;0m        replication command (Heikki Linnakangas)[0;0m
[1;34m+ -->[0;0m
[1;34m+ レプリケーションコマンド<literal>IDENTIFY_SYSTEM</>でWAL挿入でなくWALフラッシュ位置を報告するようにしました。[0;0m
[1;34m+ (Heikki Linnakangas)[0;0m
[0;0m       </para>[0;0m
[0;0m  [0;0m
[0;0m       <para>[0;0m
[1;34m+ <!--[0;0m
[0;0m        This avoids a possible startup failure[0;0m
[0;0m        in <application>pg_receivexlog</>.[0;0m
[1;34m+ -->[0;0m
[1;34m+ これにより<application>pg_receivexlog</>の起動失敗の可能性を回避します。[0;0m
[0;0m       </para>[0;0m
[0;0m      </listitem>[0;0m
[0;0m  [0;0m
[1;35m***************[0;0m
[1;35m*** 612,618 ****[0;0m
[0;0m  （典型的なシナリオは、サーバが<literal>COPY FROM STDIN</>の実行中に連続して NOTICE メッセージを送ってくる場合です）。[0;0m
[0;0m  このとき、通常のブロッキングモードなら適切に動作しますが、ノンブロッキングモードの場合はそうではありあません。[0;0m
[0;0m  私たちは<application>libpq</>を日和見的に可能なときに入力を排出するように修正しましたが、この問題に対する完全な対策にはアプリケーションの協力が必要です。[0;0m
[1;31m! アプリケーションは write-ready 状態だけでなく、read-ready に気を付けなければならず、read-ready に応じて確実に<function>PQconsumeInput()</>を呼ばなければいけません。 [0;0m
[0;0m       </para>[0;0m
[0;0m      </listitem>[0;0m
[0;0m  [0;0m
[1;35m--- 652,658 ----[0;0m
[0;0m  （典型的なシナリオは、サーバが<literal>COPY FROM STDIN</>の実行中に連続して NOTICE メッセージを送ってくる場合です）。[0;0m
[0;0m  このとき、通常のブロッキングモードなら適切に動作しますが、ノンブロッキングモードの場合はそうではありあません。[0;0m
[0;0m  私たちは<application>libpq</>を日和見的に可能なときに入力を排出するように修正しましたが、この問題に対する完全な対策にはアプリケーションの協力が必要です。[0;0m
[1;34m! アプリケーションは write-ready 状態だけでなく、read-ready に気を付けなければならず、read-ready に応じて確実に<function>PQconsumeInput()</>を呼ばなければいけません。[0;0m
[0;0m       </para>[0;0m
[0;0m      </listitem>[0;0m
[0;0m  [0;0m
[1;35m***************[0;0m
[1;35m*** 687,708 ****[0;0m
[1;35m--- 727,759 ----[0;0m
[0;0m  [0;0m
[0;0m      <listitem>[0;0m
[0;0m       <para>[0;0m
[1;34m+ <!--[0;0m
[0;0m        In <application>pg_dump</>, fix failure to honor <literal>-Z</>[0;0m
[0;0m        compression level option together with <literal>-Fd</>[0;0m
[0;0m        (Michael Paquier)[0;0m
[1;34m+ -->[0;0m
[1;34m+ <application>pg_dump</>で、<literal>-Fd</> と一緒に指定された場合に <literal>-Z</> 圧縮レベル オプションを尊重するように修正しました。[0;0m
[1;34m+ (Michael Paquier)[0;0m
[0;0m       </para>[0;0m
[0;0m      </listitem>[0;0m
[0;0m  [0;0m
[0;0m      <listitem>[0;0m
[0;0m       <para>[0;0m
[1;34m+ <!--[0;0m
[0;0m        Make <application>pg_dump</> consider foreign key relationships[0;0m
[0;0m        between extension configuration tables while choosing dump order[0;0m
[0;0m        (Gilles Darold, Michael Paquier, Stephen Frost)[0;0m
[1;34m+ -->[0;0m
[1;34m+ <application>pg_dump</>を、ダンプ順序の選択で、拡張モジュールの設定テーブル間の外部キー関係を考慮するようにしました。[0;0m
[1;34m+ (Gilles Darold, Michael Paquier, Stephen Frost)[0;0m
[0;0m       </para>[0;0m
[0;0m  [0;0m
[0;0m       <para>[0;0m
[1;34m+ <!--[0;0m
[0;0m        This oversight could result in producing dumps that fail to reload[0;0m
[0;0m        because foreign key constraints are transiently violated.[0;0m
[1;34m+ -->[0;0m
[1;34m+ この誤りで、外部キー制約が一時的に違反になるために再ロードできないダンプを作ってしまう可能性がありました。[0;0m
[0;0m       </para>[0;0m
[0;0m      </listitem>[0;0m
[0;0m  [0;0m
[1;35m***************[0;0m
[1;35m*** 794,802 ****[0;0m
[1;35m--- 845,857 ----[0;0m
[0;0m  [0;0m
[0;0m      <listitem>[0;0m
[0;0m       <para>[0;0m
[1;34m+ <!--[0;0m
[0;0m        Improve handling of <function>readdir()</> failures when scanning[0;0m
[0;0m        directories in <application>initdb</> and <application>pg_basebackup</>[0;0m
[0;0m        (Marco Nenciarini)[0;0m
[1;34m+ -->[0;0m
[1;34m+ <application>initdb</>と<application>pg_basebackup</>でディレクトリを読み取るときに、<function>readdir()</>が失敗した場合の扱いを改善しました。[0;0m
[1;34m+ (Marco Nenciarini)[0;0m
[0;0m       </para>[0;0m
[0;0m      </listitem>[0;0m
[0;0m  [0;0m
[1;35m***************[0;0m
[1;35m*** 817,823 ****[0;0m
[0;0m  -->[0;0m
[0;0m  Sparc V8 マシンでのコンパイル失敗を修正しました。[0;0m
[0;0m  (Rob Rowan)[0;0m
[1;31m!      </para>[0;0m
[0;0m      </listitem>[0;0m
[0;0m  [0;0m
[0;0m      <listitem>[0;0m
[1;35m--- 872,878 ----[0;0m
[0;0m  -->[0;0m
[0;0m  Sparc V8 マシンでのコンパイル失敗を修正しました。[0;0m
[0;0m  (Rob Rowan)[0;0m
[1;34m!     </para>[0;0m
[0;0m      </listitem>[0;0m
[0;0m  [0;0m
[0;0m      <listitem>[0;0m
